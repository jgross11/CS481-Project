<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Creation</title>
</head>
    <style>
        .list{
            height: 10%; 
            overflow: auto;
            display: none;
        }
        .header{
            font-weight: bolder;
            font-size: 25px;
        }
        .subheader{
            font-weight: bold;
            font-size: 20px;
        }
    </style>
    
<body>
    <a href="/" class="button">Home</a><br>
    <label for="experimentNameBox">Experiment name: </label><br>
    <input type="text" placeholder="Enter the experiment name" id="experimentNameBox"><br>
    
    <label for="experimentCreatorBox">Experiment creator: </label><br>
    <input type="text" placeholder="Experiment Creator" id="experimentCreatorBox" disabled><br><br>

    <label for="ListContainers">Select a component to add: </label><br>
    <div id="ListContainers">
        <div id="equipmentContainer">
            <div class="header" onclick="toggleList(0)">Equipment</div>
            <div class="list" id="equipmentList">
                
            </div>
        </div>
        
        <div id="chemicalContainer">
            <div class="header" onclick="toggleList(1)">Chemical</div>
            <div class="list" id="chemicalList">

            </div>
        </div>
        
        <div id="equationContainer">
            <div class="header" onclick="toggleVisibility(document.getElementById('subheaderContainer'))">Equation</div>
            <div class="list" id="subheaderContainer">
                <div class="subheader" id="equationSearch" onclick="toggleVisibility(document.getElementById('searchSubheaderContainer'))">Equation Search</div>
                    <div class="list" id="searchSubheaderContainer">
                        <div id="equationList">
                            <label for="equationSeachBar">Search for equation</label><br>
                            <input type="text" placeholder="Search for equation" name="equationSeachBar" id="equationSeachBar" oninput="searchEquation(this.value)"><br><br>
                            <div id="equationSearchResultContainer">
                
                            </div>
                        </div>
                    </div>
                <div class="subheader" id="equationAdd" onclick="toggleVisibility(document.getElementById('insertEquationFormContainer')); initEquationCreation()">Add Equation </div>
                <div class="list" id="insertEquationFormContainer">
                    <div id="equationPreview"></div><br>
                    <div id="equationError"></div><br>
        
                    <input type="button" value="Add Reactant" onclick="addReactant(); updatePreview()"> 
                    <input type="button" value="Add Product" onclick="addProduct(); updatePreview()">
                    <input type="button" value="Submit Equation" onclick="submitEquation()"><br> 
                    <div id="reactantContainer">
                        Reactants <br>
                        <input type="number" name="reactantCoefficient"
                        value="1" min="1" step="1" style="width: 50px"
                        oninput="updatePreview()"> <input name="reactantFormula"type="text" value="H2" style="width: 70px"oninput="updatePreview()" required>
                    </div>
                    <br>
                    <div id="productContainer">
                        Products <br>
                        <input type="number" name="productCoefficient"
                        value="1" min="1" step="1" style="width: 50px"
                        oninput="updatePreview()"> <input name="productFormula"type="text" value="H2" style="width: 70px"oninput="updatePreview()">
                    </div>
                </div>
            </div>
            
            
        </div>
    </div>

    <script src="./helperFunctions.js"></script>
    <script src="./equationFormHandler.js"></script>
</body>

<script reference="generic script name.js">
    let user = JSON.parse(sessionStorage.getItem("user"));
    let listDivList = document.getElementsByClassName("list");
    if(user == null){
        console.log("not logged in!");
    } else{
        document.getElementById("experimentCreatorBox").value = user.fullName;
    }

    function toggleVisibility(div){
        div.style.display = div.style.display == "inline" ? "none" : "inline";
    }
</script>
</html>